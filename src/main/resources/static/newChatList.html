<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>채팅 목록</title>
</head>
<body>
<h1>채팅 목록</h1>
<ul id="chatRooms"></ul>

<script>
    const userId = new URLSearchParams(window.location.search).get('userId');

    fetch(`/api/chat/rooms?userId=${userId}`)
        .then(res => res.json())
        .then(rooms => {
            const ul = document.getElementById('chatRooms');
            rooms.forEach(room => {
                const li = document.createElement('li');
                li.textContent = `방번호: ${room.roomId} / 상품ID: ${room.listingId}`;
                li.style.cursor = 'pointer';
                li.addEventListener('click', () => {
                    // 기존 방 roomId를 그대로 전달
                    window.location.href = `/chatPage.html?roomId=${room.roomId}&listingId=${room.listingId}&sellerId=${room.sellerId}`;
                });
                ul.appendChild(li);
            });
        });
</script>
</body>
</html>
