<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>마이페이지</title>
<link href="../css/reset.css" rel="stylesheet" />
<link href="../css/main.css" rel="stylesheet" />
<link href="../css/mypage.css" rel="stylesheet" />
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>
<header id="header"></header>
<div class="header-spacer"></div>
<main aria-label="마이페이지" class="mypage-wrap">
    <!-- Sidebar -->
    <aside aria-label="마이페이지 메뉴" class="mp-side">
        <div class="shop-box">
            <div class="shop-name" id="shopName">상점명: OO</div>
            <div class="shop-meta" id="shopMeta">팔로워 0 · 찜 0 · 가입일 -</div>
            <div class="shop-edit">
                <button id="btnShopEdit" type="button">상점 정보 수정</button>
            </div>
        </div>
        <nav aria-label="메뉴" class="mp-nav" role="tablist">
            <h4>대시보드</h4>
            <div class="mp-link active" data-tab="dashboard" role="tab">요약</div>
            <h4>상품</h4>
            <div class="mp-link" data-tab="products" role="tab">등록한 상품</div>
            <div class="mp-link" data-tab="favorites" role="tab">찜한 상품</div>
            <h4>거래</h4>
            <div class="mp-link" data-tab="sales" role="tab">판매 내역</div>
            <div class="mp-link" data-tab="purchases" role="tab">구매 내역</div>
            <h4>후기</h4>
            <div class="mp-link" data-tab="reviews" role="tab">받은 후기</div>
            <h4>메시지·알림</h4>
            <div class="mp-link" data-tab="messages" role="tab">채팅</div>
            <div class="mp-link" data-tab="alerts" role="tab">알림</div>
            <h4>설정</h4>
            <div class="mp-link" data-tab="shop" role="tab">상점 관리</div>
            <div class="mp-link" data-tab="account" role="tab">계정 관리</div>
            <div class="mp-link" data-tab="support" role="tab">신고/문의</div>
        </nav>
    </aside>

    <!-- Content -->
    <section class="mp-content">
        <!-- Dashboard -->
        <div class="tab section" id="tab-dashboard" role="tabpanel">
            <h2>요약</h2>
            <div class="mp-cards" id="dashCards">
                <div class="mp-card"><h3>판매중</h3><div class="big" id="statOnSale">0</div></div>
                <div class="mp-card"><h3>거래 완료</h3><div class="big" id="statSold">0</div></div>
                <div class="mp-card"><h3>받은 후기</h3><div class="big" id="statReviews">0</div></div>
                <div class="mp-card"><h3>평점</h3><div class="big" id="statRating">-</div></div>
            </div>
        </div>

        <!-- Products -->
        <div class="tab section" id="tab-products" role="tabpanel">
            <div class="flex-head">
                <h2>등록한 상품</h2>
                <div class="subtabs" role="tablist">
                    <button class="active" data-status="ON_SALE" type="button">판매중</button>
                    <button data-status="RESERVED" type="button">예약중</button>
                    <button data-status="SOLD" type="button">판매완료</button>
                </div>
            </div>
            <div class="grid" id="productsGrid"></div>
            <div class="empty" id="productsEmpty">등록된 상품이 없습니다.</div>
        </div>

        <!-- Favorites -->
        <div class="tab section" id="tab-favorites" role="tabpanel">
            <h2>찜한 상품</h2>
            <div class="grid" id="favGrid"></div>
            <div class="empty" id="favEmpty">찜한 상품이 없습니다.</div>
        </div>

        <!-- Sales -->
        <div class="tab section" id="tab-sales" role="tabpanel">
            <h2>판매 내역</h2>
            <table aria-describedby="salesHelp">
                <thead>
                    <tr>
                        <th>주문번호</th>
                        <th>상품</th>
                        <th>구매자</th>
                        <th>가격</th>
                        <th>상태</th>
                        <th>일시</th>
                    </tr>
                </thead>
                <tbody id="salesBody"></tbody>
            </table>
            <p class="sr-only" id="salesHelp">판매 내역 목록</p>
        </div>

        <!-- Purchases -->
        <div class="tab section" id="tab-purchases" role="tabpanel">
            <h2>구매 내역</h2>
            <section id="ordersSection">
                <table id="ordersTable">
                    <thead>
                        <tr>
                            <th>주문 번호</th>
                            <th>상품 이름</th>
                            <th>거래 방식</th>
                            <th>상태</th>
                            <th>가격</th>
                            <th>거래 확인</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- JS에서 fetch로 주문 리스트 채움 -->
                    </tbody>
                </table>
            </section>
        </div>

        <!-- Reviews -->
        <div class="tab section" id="tab-reviews" role="tabpanel">
            <h2>받은 후기</h2>
            <table>
                <thead>
                    <tr>
                        <th>평점</th>
                        <th>코멘트</th>
                        <th>작성자</th>
                        <th>일시</th>
                    </tr>
                </thead>
                <tbody id="reviewsBody"></tbody>
            </table>
        </div>

        <!-- Messages -->
        <div class="tab section" id="tab-messages" role="tabpanel">
            <h2>채팅</h2>
            <div class="empty">채팅 목록은 별도 페이지에서 관리됩니다. <a href="/chat">채팅 열기</a></div>
        </div>

        <!-- Alerts -->
        <div class="tab section" id="tab-alerts" role="tabpanel">
            <h2>알림</h2>
            <div id="alertsList"></div>
        </div>

        <!-- Shop settings -->
        <div class="tab section" id="tab-shop" role="tabpanel">
            <h2>상점 관리</h2>
            <form id="shopForm">
                <label>상점명 <input name="shopName" required type="text" /></label>
                <label>소개 <textarea name="intro" placeholder="상점 소개를 작성해 주세요" rows="4"></textarea></label>
                <div class="btn-row">
                    <button type="submit">저장</button>
                    <button id="btnPreviewShop" type="button">상점 보기</button>
                </div>
            </form>
        </div>

        <!-- Account management -->
        <div class="tab section" id="tab-account" role="tabpanel">
            <h2>계정 관리</h2>
            <!-- 기존 계정 관리 폼 코드 그대로 -->
        </div>

        <!-- Support -->
        <div class="tab section" id="tab-support" role="tabpanel">
            <h2>신고/문의</h2>
            <div class="empty">신고/문의 내역은 <a href="/report/reportForm.html">여기</a>에서 접수할 수 있어요.</div>
        </div>
    </section>
</main>

<template id="tplProduct">
    <div class="item">
        <a><img alt="상품 이미지"/>
            <div class="pad">
                <div class="title"></div>
                <div class="price"></div>
                <div class="meta"></div>
            </div>
        </a>
    </div>
</template>

<script src="../js/header.js"></script>
<script src="../js/myPage.js"></script>
</body>
</html>
